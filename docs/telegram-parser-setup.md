# üîç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –ø–∞—Ä—Å–µ—Ä–∞

## –û–±–∑–æ—Ä

Telegram –ø–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∞–º–∏, –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ Firebase –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ò–ò.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤ Telegram
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º** (–≥—Ä—É–∑, –ø–µ—Ä–µ–≤–æ–∑–∫–∞, –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ —Ç.–¥.)
- ‚úÖ **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π** - –∏—Å–∫–ª—é—á–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—ã
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Firebase** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏** –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

## –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram API

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://my.telegram.org
2. –í–æ–π–¥–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"API development tools"**
4. –ù–∞–∂–º–∏—Ç–µ **"Create new application"**
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **App title:** `Autologist Parser`
   - **Short name:** `autologist`
   - **Platform:** `Desktop`
   - **Description:** `Cargo transportation automation system`
6. –ü–æ–ª—É—á–∏—Ç–µ `api_id` –∏ `api_hash`

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
   ```bash
   cp .env.example .env
   ```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
   ```bash
   # Telegram API
   TELEGRAM_API_ID=–≤–∞—à_api_id
   TELEGRAM_API_HASH=–≤–∞—à_api_hash
   TELEGRAM_SESSION_NAME=autologist_session
   
   # Firebase
   FIREBASE_PROJECT_ID=autologist-91ecf
   ```

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install telethon python-dotenv firebase-admin
```

## –®–∞–≥ 4: –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
python scripts/setup_telegram.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç API –∫–ª—é—á–∏
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –≤–∞—à–∏ –≥—Ä—É–ø–ø—ã –∏ –∫–∞–Ω–∞–ª—ã
- ‚úÖ –ù–∞–π–¥–µ—Ç —á–∞—Ç—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∞–º–∏

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞

```bash
python parsers/telegram_parser_v2.py
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
2. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Ç–æ–≤** - –ø–æ–∏—Å–∫ –≥—Ä—É–ø–ø –∏ –∫–∞–Ω–∞–ª–æ–≤
3. **–ù–∞—á–∞–ª–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –∑–∞–ø–∏—Å—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Firebase

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

### –õ–æ–≥–∏
–ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ `logs/telegram_parser.log`:

```
2025-10-29 10:30:15 - INFO - üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –ø–∞—Ä—Å–µ—Ä–∞...
2025-10-29 10:30:16 - INFO - ‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2025-10-29 10:30:17 - INFO - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –∫–∞–∫: –ò–≤–∞–Ω (@ivan_user)
2025-10-29 10:30:18 - INFO - üîç –ò—â–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–∞—Ç—ã –∏ –∫–∞–Ω–∞–ª—ã...
2025-10-29 10:30:19 - INFO - üöõ –≥—Ä—É–ø–ø–∞: –ì—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –†–§ (ID: -123456789)
2025-10-29 10:30:20 - INFO - üëÅÔ∏è  –ù–∞—á–∏–Ω–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π...
2025-10-29 10:31:25 - INFO - üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –ì—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –†–§
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
   ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 150
   ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –±–∞–∑—É: 23
   ‚Ä¢ –û—à–∏–±–æ–∫: 0
   ‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 2:30:45
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `config/monitored_chats.json` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```json
[
  {
    "name": "–ì—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∏ –†–§",
    "username": "@cargo_rf",
    "chat_id": -123456789,
    "keywords": ["–≥—Ä—É–∑", "–ø–µ—Ä–µ–≤–æ–∑–∫–∞", "–¥–æ—Å—Ç–∞–≤–∫–∞", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "—Ç–æ–Ω–Ω"],
    "enabled": true
  }
]
```

## –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–ü–∞—Ä—Å–µ—Ä –∏—â–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ:
- **–≥—Ä—É–∑**, **–≥—Ä—É–∑—ã**
- **–ø–µ—Ä–µ–≤–æ–∑–∫–∞**, **–¥–æ—Å—Ç–∞–≤–∫–∞**
- **—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç**, **—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** 
- **—Ç–æ–Ω–Ω**, **—Ç–æ–Ω–Ω–∞**
- **–º–∞—Ä—à—Ä—É—Ç**
- **—Ñ—É—Ä–∞**, **–≥–∞–∑–µ–ª—å**
- **–ª–æ–≥–∏—Å—Ç–∏–∫–∞**

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "API ID/Hash not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω—ã `TELEGRAM_API_ID` –∏ `TELEGRAM_API_HASH`

### –û—à–∏–±–∫–∞ "SessionPasswordNeededError"
- –£ –≤–∞—Å –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è

### –û—à–∏–±–∫–∞ "FloodWaitError"
- Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥–µ—Ç –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å

### –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Firebase
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã—Ö —á–∞—Ç–∞—Ö –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Firebase

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ùå **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ** —Ñ–∞–π–ª `.env` –≤ Git
- ‚úÖ –§–∞–π–ª `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞