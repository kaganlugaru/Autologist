<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π Autologist - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #result { margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Autologist</h1>
    
    <div>
        <button onclick="testShowTab()">–¢–µ—Å—Ç showTab</button>
        <button onclick="testRefreshChats()">–¢–µ—Å—Ç refreshChats</button>
        <button onclick="testLoadStatus()">–¢–µ—Å—Ç loadStatus</button>
        <button onclick="testAllFunctions()">–¢–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π</button>
        <button onclick="clearResults()">–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
    </div>
    
    <div id="result"></div>

    <script>
        // –ú–æ–¥–µ–ª–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ä–µ–¥—É
        window.API_BASE = 'http://localhost:8080';
        
        // –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function mockElement(id) {
            const div = document.createElement('div');
            div.id = id;
            div.textContent = 'Mock element';
            div.classList = {
                add: function(cls) { console.log(`–î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å ${cls} –∫ ${id}`); },
                remove: function(cls) { console.log(`–£–¥–∞–ª–µ–Ω –∫–ª–∞—Å—Å ${cls} –∏–∑ ${id}`); }
            };
            return div;
        }

        // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        document.getElementById = function(id) {
            return mockElement(id);
        };

        document.querySelectorAll = function(selector) {
            return [mockElement('mock1'), mockElement('mock2')];
        };

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∫–æ–ø–∏–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)
        window.showTab = function(tabName) {
            try {
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('active');
                });
                
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                const targetTab = document.getElementById(tabName);
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                return true;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ showTab:', error);
                return false;
            }
        };
        
        window.refreshChats = function() {
            try {
                console.log('refreshChats –≤—ã–∑–≤–∞–Ω–∞');
                return true;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ refreshChats:', error);
                return false;
            }
        };
        
        window.loadStatus = async function() {
            try {
                const response = await fetch(`${API_BASE}/api/status`);
                if (response.ok) {
                    const data = await response.json();
                    console.log('–°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∂–µ–Ω:', data);
                    return true;
                }
                return false;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ loadStatus:', error);
                return false;
            }
        };
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function addResult(text, isSuccess = true) {
            const result = document.getElementById('result');
            const p = document.createElement('p');
            p.className = isSuccess ? 'success' : 'error';
            p.innerHTML = `${isSuccess ? '‚úÖ' : '‚ùå'} ${text}`;
            result.appendChild(p);
        }

        function testShowTab() {
            const result = showTab('dashboard');
            addResult(`showTab('dashboard') - ${result ? '–£–°–ü–ï–•' : '–û–®–ò–ë–ö–ê'}`, result);
        }
        
        function testRefreshChats() {
            const result = refreshChats();
            addResult(`refreshChats() - ${result ? '–£–°–ü–ï–•' : '–û–®–ò–ë–ö–ê'}`, result);
        }
        
        async function testLoadStatus() {
            try {
                const result = await loadStatus();
                addResult(`loadStatus() - ${result ? '–£–°–ü–ï–• (—Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç)' : '–û–®–ò–ë–ö–ê (—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)'}`, result);
            } catch (error) {
                addResult(`loadStatus() - –û–®–ò–ë–ö–ê: ${error.message}`, false);
            }
        }

        async function testAllFunctions() {
            addResult('=== –ù–ê–ß–ê–õ–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø ===', true);
            
            // –¢–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
            const tests = [
                () => testShowTab(),
                () => testRefreshChats(),
                () => testLoadStatus()
            ];

            for (let test of tests) {
                try {
                    await test();
                } catch (error) {
                    addResult(`–û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–µ: ${error.message}`, false);
                }
            }

            addResult('=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û ===', true);
        }
        
        function clearResults() {
            document.getElementById('result').innerHTML = '';
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            addResult('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã', true);
            addResult('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: showTab, refreshChats, loadStatus', true);
        });
    </script>
</body>
</html>